image: coffeemate/nodejs

stages:
    - build
    - test
    - deploy

build_app:
    stage: build
    script:
        - yarn install
        - cd resources && yarn install && cd ..
        - yarn run build
    artifacts:
        expire_in: 1 week
        untracked: true

test_app:
    stage: test
    script:
        - yarn run lint
        - cd resources
        - yarn run lint
        - yarn run test:unit
deploy_staging:
    stage: deploy
    script:
        - echo "Not implemented yet"
    except:
        - master

deploy_production:
    stage: deploy
    script:
        - echo "Not implemented yet"
    only:
        - master
